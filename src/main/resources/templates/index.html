<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="/img/IconoPestaña.jpg" />
    <title>TELEMARKETING</title>

    <!-- Nuestro css-->
    <link rel="stylesheet" type="text/css" href="/css/index.css" th:href="@{/css/index.css}">
    <!-- ===== BOX ICONS ===== -->
    <link href='https://cdn.jsdelivr.net/npm/boxicons@2.0.5/css/boxicons.min.css' rel='stylesheet'>
    <!-- Google reCAPTCHA -->
    <script src="https://www.google.com/recaptcha/api.js" async defer></script>

</head>
<body>
<div class="login">
    <div class="login__content">
        <img class="wave" src="/img/wave2.png">
        <div class="login__img">
            <img src="/img/Programming.png" alt="">
            <img class="wave2" src="/img/wave4.png">
        </div>

        <div class="login__forms">
            <form th:action="@{/login}" method="post" class="login__registre" id="login-in" onsubmit="return onSubmit(event)">
                <h1 class="login__title">Sign In</h1>
                Welcome Back ! Sign in to continue to Telemarketing.

                <div class="login__box">
                    <i class='bx bx-user login__icon'></i>
                    <input type="text" placeholder="Username" class="login__input" name="username">
                </div>

                <div class="login__box">
                    <i class='bx bx-lock-alt login__icon'></i>
                    <input type="password" placeholder="Password" class="login__input" name="password">
                </div>
               <br>
                <div class="g-recaptcha" data-sitekey="6LcXGgUqAAAAADWbAvnCtfecsS8rqoeB7UmmvpKG"></div>

                <button type="submit" class="login__button">Sign In</button>

                <div th:if="${param.error}" class="alert alert-danger" role="alert">
                    NOMBRE DE USUARIO O CONTRASEÑA INCORRECTA
                </div>
                <div th:if="${param.logout}" class="alert alert-success" role="alert">
                    HAS CERRADO TU SESIÓN
                </div>
                <div id="recaptcha-error" class="alert alert-danger" style="display:none;" role="alert">
                    Por favor resuelve el reCAPTCHA.
                </div>

            </form>

        </div>
    </div>
</div>

<!--===== JS =====-->
<script>
    function onSubmit(event) {
        var response = grecaptcha.getResponse();
        if (response.length === 0) {
            document.getElementById('recaptcha-error').style.display = 'block';
            event.preventDefault();
            return false;
        } else {
            document.getElementById('recaptcha-error').style.display = 'none';
        }
        // Aquí puedes agregar código adicional para validar las credenciales si lo deseas
        // Por ejemplo, validar en JavaScript antes de enviar el formulario
        // Si las credenciales son incorrectas, puedes mostrar el mensaje de error correspondiente
        // En un ejemplo real, validarías las credenciales con una llamada AJAX o similar.
        return true;
    }
</script>
</body>
</html>

